#!/bin/bash -e

echo "---> RUNning conatiner... $cluster"

sed -i 's/druid.zk.service.host=localhost/druid.zk.service.host='

case $cluster in
    "usage")
        echo "Usage!"
        /usr/libexec/s2i/usage
        exit 0
        ;;
    "coordinator-overlord")
        echo "Copying env variables..."

        echo "Running coordinator-overlord..."
        exec /app/druid/bin/start-coordinator-overlord-small
        ;;
    "broker")
        echo "Running broker..."
        exec /app/druid/bin/start-broker-small
        ;;
    "historical")
        echo "Running historical..."
        exec /app/druid/bin/start-historical-small
        ;;
    "middlemanager")
        echo "Running middlemanager"
        exec /app/druid/bin/start-middleManager-small
        ;;
    "router")
        echo "Running router..."
        exec /app/druid/bin/start-router-small
        ;;
    *)
        echo "Running bash..."
        exec /bin/bash
        ;;
esac